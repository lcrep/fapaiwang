{"version":3,"sources":["webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?df90","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?a987","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?17a5","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?f739","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?fecf","webpack:///D:/repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue?6482"],"names":["msgType","require","RECORD_CONST","RecordStatus","RecordDesc","RunAnimation","recordTimeInterval","InitHeight","components","data","changedTouches","recordStatus","HIDE","radomheight","recorderManager","uni","getRecorderManager","recordClicked","recordTime","props","username","type","Object","value","chatType","String","SINGLE_CHAT","onUnload","methods","toggleWithoutAction","e","toggleRecordModal","SHOW","handleRecordingMove","touches","SWIPE","pageY","HOLD","handleRecording","me","setTimeout","executeRecord","getSetting","success","res","recordAuth","authSetting","openSetting","showToast","title","icon","isLongPress","startRecord","authorize","scope","fail","console","log","myradom","onStart","setInterval","start","format","handleRecordingCancel","RELEASE","onStop","duration","uploadRecord","tempFilePath","clearInterval","stop","isGroupChat","CHAT_ROOM","getSendToParam","groupId","your","dur","str","$im","config","appkey","split","token","conn","context","accessToken","uploadFile","url","filePath","name","header","Authorization","id","getUniqueId","msg","message","AUDIO","dataObj","JSON","parse","set","apiUrl","apiURL","body","uri","entities","uuid","filetype","filename","length","Math","ceil","from","myName","to","roomType","argument","setGroup","send","$emit","that","_radomheight","i","random","toFixed"],"mappings":"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","file":"components/chat/inputbar/suit/audio/audio.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./audio.vue?vue&type=template&id=5306e04a&\"\nvar renderjs\nimport script from \"./audio.vue?vue&type=script&lang=js&\"\nexport * from \"./audio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./audio.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"repositories/fapaiwang/components/chat/inputbar/suit/audio/audio.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio.vue?vue&type=template&id=5306e04a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet msgType = require(\"../../../msgtype\");\nlet RECORD_CONST = require(\"./record_status\");\nlet RecordStatus = RECORD_CONST.RecordStatus;\nlet RecordDesc = RECORD_CONST.RecordDesc;\n//let disp = require(\"../../../../../utils/broadcast\");\nlet RunAnimation = false\nlet recordTimeInterval = null;\nconst InitHeight = [50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50]\n\nexport default {\n\tcomponents: {\n\t\t\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchangedTouches: null,\n\t\t\trecordStatus: RecordStatus.HIDE,\n\t\t\tRecordStatus,\n\t\t\tRecordDesc,\t\t// 模板中有引用\n\t\t\tradomheight: InitHeight,\n\t\t\trecorderManager: uni.getRecorderManager(),\n\t\t\trecordClicked: false,\n\t\t\t\n\t\t\trecordTime: 0\n\t\t}\n\t},\n\tprops: {\n\t\tusername: {\n\t\t\ttype: Object,\n\t\t\tvalue: {},\n\t\t},\n\t\tchatType: {\n\t\t\ttype: String,\n\t\t\tvalue: msgType.chatType.SINGLE_CHAT,\n\t\t},\n\t},\n\n\tonUnload() {\n\t\t\n\t},\n\tmethods: {\n\t\ttoggleWithoutAction(e){\n\t\t\t// 阻止 tap 冒泡\n\t\t},\n\n\t\ttoggleRecordModal(){\n\t\t\tthis.recordStatus = this.recordStatus == RecordStatus.HIDE ? RecordStatus.SHOW : RecordStatus.HIDE\n\t\t\tthis.radomheight = InitHeight\n\t\t},\n\t\t\n\t\thandleRecordingMove(e){\n\t\t\tvar touches = e.touches[0];\n\t\t\tvar changedTouches = this.changedTouches;\n\t\t\tif(!changedTouches){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\n\t\t\tif(this.recordStatus == RecordStatus.SWIPE){\n\t\t\t\tif(changedTouches.pageY - touches.pageY < 20){\n\t\t\t\t\tthis.recordStatus = RecordStatus.HOLD\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.recordStatus == RecordStatus.HOLD){\n\t\t\t\tif(changedTouches.pageY - touches.pageY > 20){\n\t\t\t\t\tthis.recordStatus = RecordStatus.SWIPE\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\thandleRecording(e){\n\t\t\tlet me = this;\n\t\t    me.recordClicked = true\n\t\t    setTimeout(() => {\n\t\t      \tif (me.recordClicked == true) {\n\t\t        \texecuteRecord()\n\t\t      \t}\n\t\t    }, 350)\n\t\t    function executeRecord(){\n\n\n\n\n\t\t\t\t\n\t\t\t    uni.getSetting({\n\t\t\t      \tsuccess: (res) => {\n\t\t\t\t\t\t// return;\n\t\t\t\t        let recordAuth = res.authSetting['scope.record'];\n\t\t\t\t        if (recordAuth == false) { //已申请过授权，但是用户拒绝\n\t\t\t\t          \tuni.openSetting({\n\t\t\t\t\t            success: function (res) {\n\t\t\t\t\t              let recordAuth = res.authSetting['scope.record']\n\t\t\t\t\t              if (recordAuth == true) {\n\t\t\t\t\t                uni.showToast({\n\t\t\t\t\t\t\t        \ttitle: \"授权成功\",\n\t\t\t\t\t\t\t        \ticon: \"success\"\n\t\t\t\t\t\t\t        })\n\t\t\t\t\t              } else {\n\t\t\t\t\t                uni.showToast({\n\t\t\t\t\t\t\t        \ttitle: \"请授权录音\",\n\t\t\t\t\t\t\t        \ticon: \"none\"\n\t\t\t\t\t\t\t        })\n\t\t\t\t\t              }\n\t\t\t\t\t              me.isLongPress = false\n\t\t\t\t\t            }\n\t\t\t\t          \t})\n\t\t\t\t        } else if (recordAuth == true) { // 用户已经同意授权\n\t\t\t\t          \tstartRecord()\n\t\t\t\t        } else { // 第一次进来，未发起授权\n\t\t\t\t\t        uni.authorize({\n\t\t\t\t\t            scope: 'scope.record',\n\t\t\t\t\t            success() {//授权成功\n\t\t\t\t\t              \tuni.showToast({\n\t\t\t\t\t\t\t        \ttitle: \"授权成功\",\n\t\t\t\t\t\t\t        \ticon: \"success\"\n\t\t\t\t\t\t\t        })\n\t\t\t\t\t            },\n\t\t\t\t\t\t\t\tfail(e) {\n\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t        })\n\t\t\t\t        }\n\t\t\t\t    },\n\t\t\t\t    fail: function () {\n\t\t\t\t        uni.showToast({\n\t\t\t\t        \ttitle: \"鉴权失败，请重试\",\n\t\t\t\t        \ticon: \"none\"\n\t\t\t\t        })\n\t\t\t      \t}\n\t\t\t    })\n\t\t    }\n\t\t\n\t\t\tfunction startRecord(){\n\t\t\t\tme.changedTouches = e.touches[0];\n\t\t\t\tme.recordStatus = RecordStatus.HOLD\n\t\t\t\tRunAnimation = true;\n\t\t\t\tme.myradom();\n\t\t\n\t\t\t\tlet recorderManager = me.recorderManager || uni.getRecorderManager();\n\t\t\t\trecorderManager.onStart(() => {\n\t\t\t\t\t// console.log(\"开始录音...\");\n\t\t\t\t\trecordTimeInterval = setInterval(() => {\n\t\t\t\t\t\tme.recordTime += 1;\n\t\t\t\t\t}, 1000)\n\t\t\t\t});\n\t\t\t\trecorderManager.start({\n\t\t\t\t\tformat: \"mp3\"\n\t\t\t\t});\n\t\t\t\t// 超时\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tme.handleRecordingCancel();\n\t\t\t\t\tRunAnimation = false\n\t\t\t\t}, 100000);\n\t\t\t}\n\t\t},\n\t\t\n\t\thandleRecordingCancel(){\n\t\t\tRunAnimation = false\n\t\t\tlet recorderManager = this.recorderManager;\n\t\t\t// 向上滑动状态停止：取消录音发放\n\t\t\tif(this.recordStatus == RecordStatus.SWIPE){\n\t\t\t\tthis.recordStatus = RecordStatus.RELEASE\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.recordStatus = RecordStatus.HIDE\n\t\t\t\tthis.recordClicked = false\n\t\t\t}\n\t\t\trecorderManager.onStop((res) => {\n\t\t\t\t// console.log(\"结束录音...\", res);\n\t\t\t\tvar duration = this.recordTime * 1000;\n\t\t\t\t\n\t\t\t\tif(this.recordStatus == RecordStatus.RELEASE){\n\t\t\t\t\tconsole.log(\"user canceled\");\n\t\t\t\t\tthis.recordStatus = RecordStatus.HIDE\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (duration <= 1000) {\n\t\t\t\t\t\n\t\t\t        uni.showToast({\n\t\t\t        \ttitle: \"录音时间太短\",\n\t\t\t        \ticon: \"none\"\n\t\t\t        })\n\t\t\t    } else {\n\t\t\t        // 上传\n\t\t\t\t\tthis.uploadRecord(res.tempFilePath, duration);\n\t\t\t    }\n\t\t\t\tclearInterval(recordTimeInterval);\n\t\t\t\tthis.recordStatus = RecordStatus.HIDE\n\t\t\t\tthis.recordTime = 0;\n\t\t\t});\n\t\t\t// 停止录音\n\t\t\trecorderManager.stop();\n\t\t},\n\t\t\n\t\tisGroupChat(){\n\t\t\treturn this.chatType == msgType.chatType.CHAT_ROOM;\n\t\t},\n\t\t\n\t\tgetSendToParam(){\n\t\t\treturn this.isGroupChat() ? this.username.groupId : this.username.your;\n\t\t},\n\t\t\n\t\tuploadRecord(tempFilePath, dur){\n\t\t\tvar str = this.$im.config.appkey.split(\"#\");\n\t\t\tvar me = this;\n\t\t\tvar token = this.$im.conn.context.accessToken\n\t\t\tuni.uploadFile({\n\t\t\t\turl: \"https://a1.easemob.com/\" + str[0] + \"/\" + str[1] + \"/chatfiles\",\n\t\t\t\tfilePath: tempFilePath,\n\t\t\t\tname: \"file\",\n\t\t\t\theader: {\n\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\n\t\t\t\t\tAuthorization: \"Bearer \" + token\n\t\t\t\t},\n\t\t\t\tsuccess(res){\n\t\t\t\t\t// 发送 xmpp 消息\n\t\t\t\t\tvar id = me.$im.conn.getUniqueId();\n\t\t\t\t\tvar msg = new me.$im.message(msgType.AUDIO, id);\n\t\t\t\t\tvar dataObj = JSON.parse(res.data);\n\t\t\t\t\t// 接收消息对象\n\t\t\t\t\tmsg.set({\n\t\t\t\t\t\tapiUrl: me.$im.config.apiURL,\n\t\t\t\t\t\taccessToken: token,\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\ttype: msgType.AUDIO,\n\t\t\t\t\t\t\turl: dataObj.uri + \"/\" + dataObj.entities[0].uuid,\n\t\t\t\t\t\t\tfiletype: \"\",\n\t\t\t\t\t\t\tfilename: tempFilePath,\n\t\t\t\t\t\t\taccessToken: token,\n\t\t\t\t\t\t\tlength: Math.ceil(dur / 1000)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfrom: me.username.myName,\n\t\t\t\t\t\tto: me.getSendToParam(),\n\t\t\t\t\t\troomType: false,\n\t\t\t\t\t\tchatType: me.chatType,\n\t\t\t\t\t\tsuccess: function (argument) {\n\t\t\t\t\t\t\t//disp.fire('em.chat.sendSuccess', id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(me.isGroupChat()){\n\t\t\t\t\t\tmsg.setGroup(\"groupchat\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tmsg.body.length = Math.ceil(dur / 1000);\n\t\t\t\t\t\n\t\t\t\t\t//console.log('发送的语音消息', msg.body)\n\t\t\t\t\tme.$im.conn.send(msg.body);\n\t\t\t\t\tuni.$emit('saveSendMsg', {\n\t\t\t\t\t\tmsg: msg,\n\t\t\t\t\t\ttype: msgType.AUDIO,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tmyradom(){\n\t\t    const that = this;\n\t\t    var _radomheight = that.radomheight;\n\t\t    for (var i = 0; i < that.radomheight.length; i++) {\n\t\t      //+1是为了避免为0\n\t\t     _radomheight[i] = (100 * Math.random().toFixed(2))+10;\n\t\t    }\n\t\t    that.radomheight = _radomheight\n\t\t    if (RunAnimation) {\n\t\t    \tsetTimeout(function () {that.myradom(); }, 500);\n\t\t    }else{\n\t\t    \treturn\n\t\t    }\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588561002597\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}