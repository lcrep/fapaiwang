(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/edit"],{"1d5f":function(e,t,a){"use strict";a.r(t);var n=a("344a"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"344a":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){Promise.all([a.e("common/vendor"),a.e("components/yq-avatar/yq-avatar")]).then(function(){return resolve(a("cda9"))}.bind(null,a)).catch(a.oe)},i={components:{avatar:n},created:function(){var e=this;e.getUserInfo()},data:function(){return{userData:"",noUserPic:!1,noInvitationCode:!1,sexArr:["保密","男","女"]}},methods:{getUserInfo:function(){var t=this;e.showLoading({title:"",mask:!0}),t.$api.userinfoQuery().then((function(a){if(a.success){e.hideLoading();var n=a.datas;n.headImgUrl||(n.headImgUrl="../../static/images/defaultUserPic.png",t.noUserPic=!0),""==!n.invitationCode&&(t.noInvitationCode=!0),t.userData=n}else e.showToast({title:a.message,icon:"none"})}))},updatePic:function(){this.$refs.avatar.fChooseImg(0,{selWidth:"300upx",selHeight:"300upx",expWidth:"260upx",expHeight:"260upx"})},picUpload:function(e){console.log(e),this.userData.headImgUrl=e.path,this.uploadImg(e.path)},uploadImg:function(t){var a=this;console.log(t),e.uploadFile({url:a.$api.filesUpload,name:"file",filePath:t,formData:{groupName:"userimg"},success:function(t){if(200==t.statusCode){var n=JSON.parse(t.data);console.log(n),n.success?(a.userData.headImgUrl=n.datas.picUrl,a.noUserPic=!1):e.showToast({title:"上传失败"})}},fail:function(e){console.log(e)}})},sexPicker:function(e){var t=this;t.userData.gender=e.detail.value},datePicker:function(e){var t=this;t.userData.birthday=e.detail.value},updateData:function(){var t=this,a={};if(a.id=t.userData.id,a.mobile=t.userData.mobile,a.nickName=t.userData.nickName,a.realName=t.userData.realName,a.gender=t.userData.gender,a.birthday=t.userData.birthday,a.invitationCode=t.userData.invitationCode,a.email=t.userData.email,a.idCardNo=t.userData.idCardNo,t.noUserPic?a.headImgUrl="":a.headImgUrl=t.userData.headImgUrl,""==a.email||t.$utils.common.emailTest.test(a.email))if(""==a.idCardNo||t.$utils.common.idCardTest.test(a.idCardNo)){e.showLoading({title:"请稍等...",mask:!0});var n=a;t.$api.userinfoUpdate(n).then((function(t){if(t.success){e.showToast({title:"修改成功"});var a=getCurrentPages()[0];if(void 0==a||null==a)return;a.onLoad()}else e.showToast({title:t.message,icon:"none"})}))}else e.showToast({title:"请输入正确的身份证号",icon:"none"});else e.showToast({title:"请输入正确的邮箱地址",icon:"none"})}}};t.default=i}).call(this,a("543d")["default"])},"41b2":function(e,t,a){"use strict";a.r(t);var n=a("5588"),i=a("1d5f");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("b999");var s,r=a("f0c5"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},5588:function(e,t,a){"use strict";var n={"uni-icons":function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-icons/uni-icons")]).then(a.bind(null,"df065"))}},i=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}))},b999:function(e,t,a){"use strict";var n=a("d861"),i=a.n(n);i.a},d46c:function(e,t,a){"use strict";(function(e){a("312d");n(a("66fd"));var t=n(a("41b2"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},d861:function(e,t,a){}},[["d46c","common/runtime","common/vendor"]]]);