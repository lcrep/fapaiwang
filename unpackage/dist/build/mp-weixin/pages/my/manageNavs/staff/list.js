(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/manageNavs/staff/list"],{"0d12":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{loadStatus:"more",pageNum:1,pageSize:10,total:"",list:[],searchVal:"",timer:null,isEdit:!1,staffList:[{name:"张三",img:"../../../../static/images/defaultUserPic.png",mobile:"13432221112",id:1},{name:"李四",img:"../../../../static/images/defaultUserPic.png",mobile:"13432226222",id:2},{name:"adsa",img:"../../../../static/images/defaultUserPic.png",mobile:"13432222262",id:3},{name:"fasfas",img:"../../../../static/images/defaultUserPic.png",mobile:"13432222432",id:4},{name:"aaaa",img:"../../../../static/images/defaultUserPic.png",mobile:"13432221222",id:5}]}},onLoad:function(){this.clearList(),this.getList(1)},methods:{reload:function(){this.clearList(),this.getList(1)},getList:function(e){var a=this,i={name:a.searchVal,startPage:e,pageSize:a.pageSize};a.loadStatus="loading",a.$api.employeeList(i).then((function(e){if(e.success){var i=e.datas.rows;for(var n in a.total=e.datas.total,i)i[n].headImgUrl=i[n].headImgUrl?i[n].headImgUrl:"../../../../static/images/defaultUserPic.png",a.list.push(i[n]);var s=e.datas.total,o=Math.ceil(s/a.pageSize);parseInt(o)>parseInt(a.pageNum)?(a.pageNum++,a.loadStatus="more"):a.loadStatus="noMore"}else t.showToast({title:e.message,icon:"none"})}))},editBtn:function(){this.isEdit=!this.isEdit},constantlySearch:function(t){var e=this;clearTimeout(e.timer),e.timer=setTimeout((function(){e.search()}),800)},gotoDetail:function(t){var e=this;e.$Router.push({path:"/pages/my/manageNavs/staff/detail",query:{id:t}})},gotoDistri:function(t){var e=this;e.$Router.push({path:"/pages/my/manageNavs/staff/distribution",query:{id:t}})},czBtn:function(e,a){var i=this;t.showActionSheet({itemList:["编辑员工资料","删除员工"],success:function(n){0==n.tapIndex?i.gotoEdit(e):1==n.tapIndex&&t.showModal({content:"确定要删除员工？",confirmText:"确认删除",cancelText:"取消",success:function(t){t.confirm?i.delEmployee(e,a):t.cancel}})}})},delEmployee:function(e,a){var i=this,n={id:e};i.$api.employeeDelete(n).then((function(e){e.success?(i.list.splice(a,1),t.showToast({title:"删除成功"})):t.showToast({title:e.message,icon:"none"})}))},gotoEdit:function(t){this.$Router.push({path:"/pages/my/manageNavs/staff/edit",query:{id:t}})},gotoAdd:function(){this.$Router.push({path:"/pages/my/manageNavs/staff/add"})},clearList:function(){var t=this;t.pageNum=1,t.total="",t.list=[]},search:function(){var t=this;t.clearList(),t.getList(1)},searchCancel:function(){var e=this;e.searchVal="",e.clearList(),e.getList(1),t.hideKeyboard()}}};e.default=a}).call(this,a("543d")["default"])},"306e":function(t,e,a){"use strict";var i={"uni-icons":function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-icons/uni-icons")]).then(a.bind(null,"df06"))},"uni-load-more":function(){return a.e("components/uni-load-more/uni-load-more").then(a.bind(null,"61d8"))}},n=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}))},5343:function(t,e,a){"use strict";(function(t){a("312d");i(a("66fd"));var e=i(a("65f7"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"546b":function(t,e,a){},"65f7":function(t,e,a){"use strict";a.r(e);var i=a("306e"),n=a("fc4b");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("c798");var o,c=a("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},c798:function(t,e,a){"use strict";var i=a("546b"),n=a.n(i);n.a},fc4b:function(t,e,a){"use strict";a.r(e);var i=a("0d12"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}},[["5343","common/runtime","common/vendor"]]]);