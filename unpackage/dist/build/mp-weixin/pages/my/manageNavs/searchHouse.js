(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/manageNavs/searchHouse"],{"20c5":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(i("301f")),a=i("2f62");function c(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={computed:(0,a.mapState)(["address"]),data:function(){return{searchVal:"",isFresh:!1,theCity:"",pageSize:10,loadStatus:"more",pageNum:1,cityIndex:[0,0],cities:[],total:"",houseList:[]}},onLoad:function(e){var t=this;if(t.cities[0]=n.default,t.address.cityIndex){var i=t.address.cityIndex[0];t.address.cityIndex[1];t.cityIndex=t.address.cityIndex,t.cities[1]=n.default[i].cities,t.provinceId=t.address.provinceId,t.cityId=t.address.cityId}else t.cityIndex=[16,0],t.cities[1]=n.default[16].cities,t.provinceId=17,t.cityId=1381;t.theCity=t.cities[1][t.cityIndex[1]].name,t.getHouseList(t.provinceId,t.cityId,1)},onReachBottom:function(){var e=this;console.log("onReachBottom"),"noMore"!=e.loadStatus&&1!=e.pageNum&&e.getHouseList(e.provinceId,e.cityId,e.pageNum)},methods:s({cityChange:function(e){switch(this.cityIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:this.cities[1]=this.cities[0][this.cityIndex[0]].cities,this.cityIndex.splice(1,1),this.cityIndex.splice(2,1,0);break;case 1:this.cityIndex.splice(2,1);break}this.$forceUpdate()},citySel:function(){var e=this;e.theCity=e.cities[1][e.cityIndex[1]].name;var t=e.cities[0][e.cityIndex[0]].id,i=e.cities[1][e.cityIndex[1]].id;e.provinceId=t,e.cityId=i;var n={provinceId:t,cityId:i,cityIndex:e.cityIndex};e.updateAddress(n),e.clearList(),e.getHouseList(e.provinceId,e.cityId,1)},getHouseList:function(t,i,n){var a=this,c={title:a.searchVal,provinceId:t,cityId:i,pageNo:n,pageSize:a.pageSize};a.loadStatus="loading",a.$api.houseSearch(c).then((function(t){if(t.success){a.isFresh&&(setTimeout((function(){e.stopPullDownRefresh()}),1e3),a.isFresh=!1);var i=t.datas.rows;for(var n in a.total=t.datas.total,i){i[n].currentPriceText=(1e-4*i[n].currentPrice).toFixed(2),1==i[n].paimaiTimes?i[n].paimaiTimesText="一拍":2==i[n].paimaiTimes?i[n].paimaiTimesText="二拍":4==i[n].paimaiTimes?i[n].paimaiTimesText="变卖":5==i[n].paimaiTimes&&(i[n].paimaiTimesText="重新拍卖");var c=(new Date).getTime(),r=new Date(i[n].startTime).getTime(),s=new Date(i[n].endTime).getTime();r>c?(i[n].paimaiStatus=1,i[n].timeText=a.$utils.formatTime(r,"MM月DD日 hh:mm")):c>=r&&c<=s?(i[n].paimaiStatus=2,i[n].timeText=a.$utils.timeCount(s)):(i[n].paimaiStatus=3,i[n].timeText=a.$utils.formatTime(s,"YYYY年MM月DD日")),a.houseList.push(i[n])}var o=t.datas.total,u=Math.ceil(o/a.pageSize);parseInt(u)>parseInt(a.pageNum)?(a.pageNum++,a.loadStatus="more"):a.loadStatus="noMore"}else e.showToast({title:t.message,icon:"none"})}))},realtimeSearch:function(e){var t=this;clearTimeout(t.timer),t.timer=setTimeout((function(){t.clearList(),t.getHouseList(t.provinceId,t.cityId,t.pageNum)}),800)},confirmSearch:function(){var e=this;e.clearList(),e.getHouseList(e.provinceId,e.cityId,e.pageNum)},clearList:function(){var e=this;e.pageNum=1,e.total="",e.houseList=[]},searchHouse:function(e,t,i){var n=this,a=getCurrentPages(),c=null;a.length>1&&(c=a[a.length-2]),c&&(c.$vm.paimaiId=e,c.$vm.houseSource=t,c.$vm.houseName=i),setTimeout((function(){n.$Router.back(1)}),100)},search:function(t){e.hideKeyboard()}},(0,a.mapMutations)(["updateAddress"]))};t.default=u}).call(this,i("543d")["default"])},6235:function(e,t,i){"use strict";var n={"uni-icons":function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-icons/uni-icons")]).then(i.bind(null,"df065"))},"uni-load-more":function(){return i.e("components/uni-load-more/uni-load-more").then(i.bind(null,"61d8"))}},a=function(){var e=this,t=e.$createElement;e._self._c},c=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return n}))},"898d":function(e,t,i){"use strict";var n=i("f5c4"),a=i.n(n);a.a},a1b7:function(e,t,i){"use strict";(function(e){i("312d");n(i("66fd"));var t=n(i("c8e0"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},c8e0:function(e,t,i){"use strict";i.r(t);var n=i("6235"),a=i("f189");for(var c in a)"default"!==c&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("898d");var r,s=i("f0c5"),o=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);t["default"]=o.exports},f189:function(e,t,i){"use strict";i.r(t);var n=i("20c5"),a=i.n(n);for(var c in n)"default"!==c&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},f5c4:function(e,t,i){}},[["a1b7","common/runtime","common/vendor"]]]);