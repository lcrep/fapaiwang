(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"1f02":function(e,t,i){"use strict";(function(e){i("312d");n(i("66fd"));var t=n(i("f7aa"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"2b08":function(e,t,i){},"8d9f":function(e,t,i){"use strict";var n=i("2b08"),a=i.n(n);a.a},b34a:function(e,t,i){"use strict";i.r(t);var n=i("bc6c"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},bc6c:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("301f")),a=i("2f62");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={computed:(0,a.mapState)(["hasLogin","userInfo","address"]),data:function(){return{provinceId:0,cityId:0,scrollTop:0,searchVal:"",tabCurrent:0,priceSort:0,total:"",isFresh:!1,isLogin:!1,theCity:"",optionType:1,loadStatus:"more",pageNum:1,pageSize:10,cityIndex:[0,0],cities:[],bannerList:[{colorClass:"uni-bg-red",url:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/shuijiao.jpg",content:"内容 A"},{colorClass:"uni-bg-green",url:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/muwu.jpg",content:"内容 B"},{colorClass:"uni-bg-blue",url:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/cbd.jpg",content:"内容 C"}],newHouseList:[],recList:[],hasNewNotice:!1}},created:function(){},onLoad:function(){var e=this;if(e.cities[0]=n.default,e.address.cityIndex){var t=e.address.cityIndex[0];e.address.cityIndex[1];e.cityIndex=e.address.cityIndex,e.cities[1]=n.default[t].cities,e.provinceId=e.address.provinceId,e.cityId=e.address.cityId}else e.cityIndex=[16,0],e.cities[1]=n.default[16].cities,e.provinceId=17,e.cityId=1381;e.theCity=e.cities[1][e.cityIndex[1]].name,e.getHouseList(1,e.provinceId,e.cityId,1),e.getRecommend()},onShow:function(){var e=this;e.hasLogin&&!e.isLogin&&e.getRecommend(),e.noticeHasunread()},onReachBottom:function(){var e=this;console.log("onReachBottom"),"noMore"!=e.loadStatus&&1!=e.pageNum&&e.getHouseList(e.optionType,e.provinceId,e.cityId,e.pageNum)},methods:c({provinceandcity:function(){var t=this;t.$api.provinceandcity().then((function(i){if(i.success){var n=i.datas;t.multiArray[0]=n,t.multiIndex=[16,0],t.multiArray[1]=n[16].cities}else e.showToast({title:i.message,icon:"none"})}))},noticeHasunread:function(){var t=this;t.$api.noticeHasunread({}).then((function(i){if(i.success){var n=i.datas;t.hasNewNotice=n}else e.showToast({title:i.message,icon:"none"})}))},cityChange:function(e){switch(this.cityIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:this.cities[1]=this.cities[0][this.cityIndex[0]].cities,this.cityIndex.splice(1,1),this.cityIndex.splice(2,1,0);break;case 1:this.cityIndex.splice(2,1);break}this.$forceUpdate()},citySel:function(){var e=this;e.theCity=e.cities[1][e.cityIndex[1]].name;var t=e.cities[0][e.cityIndex[0]].id,i=e.cities[1][e.cityIndex[1]].id;e.provinceId=t,e.cityId=i;var n={provinceId:t,cityId:i,cityIndex:e.cityIndex};e.updateAddress(n),e.clearList(),e.getHouseList(1,e.provinceId,e.cityId,1)},getHouseList:function(t,i,n,a){var o=this,s={optionType:t,provinceId:i,cityId:n,pageNo:a};o.loadStatus="loading",o.$api.houseList(s).then((function(t){if(t.success){o.isFresh&&(setTimeout((function(){e.stopPullDownRefresh()}),1e3),o.isFresh=!1);var i=t.datas.rows;for(var n in o.total=t.datas.total,i){i[n].currentPriceText=(1e-4*i[n].currentPrice).toFixed(2),1==i[n].paimaiTimes?i[n].paimaiTimesText="一拍":2==i[n].paimaiTimes?i[n].paimaiTimesText="二拍":4==i[n].paimaiTimes?i[n].paimaiTimesText="变卖":5==i[n].paimaiTimes&&(i[n].paimaiTimesText="重新拍卖");var a=(new Date).getTime(),s=new Date(i[n].startTime).getTime(),c=new Date(i[n].endTime).getTime();s>a?(i[n].paimaiStatus=1,i[n].timeText=o.$utils.formatTime(s,"MM月DD日 hh:mm")):a>=s&&a<=c?(i[n].paimaiStatus=2,i[n].timeText=o.$utils.timeCount(c)):(i[n].paimaiStatus=3,i[n].timeText=o.$utils.formatTime(c,"YYYY年MM月DD日")),o.newHouseList.push(i[n])}var r=t.datas.total,u=Math.ceil(r/o.pageSize);parseInt(u)>parseInt(o.pageNum)?(o.pageNum++,o.loadStatus="more"):o.loadStatus="noMore"}else e.showToast({title:t.message,icon:"none"})}))},getRecommend:function(){var e=this,t={pageNo:1,pageSize:3};e.$api.recommendList(t).then((function(t){if(t.success){var i=t.datas.rows;for(var n in i){i[n].currentPriceText=(1e-4*i[n].currentPrice).toFixed(2),1==i[n].paimaiTimes?i[n].paimaiTimesText="一拍":2==i[n].paimaiTimes?i[n].paimaiTimesText="二拍":4==i[n].paimaiTimes?i[n].paimaiTimesText="变卖":5==i[n].paimaiTimes&&(i[n].paimaiTimesText="重新拍卖");var a=(new Date).getTime(),o=new Date(i[n].startTime).getTime(),s=new Date(i[n].endTime).getTime();o>a?(i[n].paimaiStatus=1,i[n].timeText=e.$utils.formatTime(o,"MM月DD日 hh:mm")):a>=o&&a<=s?(i[n].paimaiStatus=2,i[n].timeText=e.$utils.timeCount(s)):(i[n].paimaiStatus=3,i[n].timeText=e.$utils.formatTime(s,"YYYY年MM月DD日"))}e.recList=i}else console.log(t.message)}))},selectTab:function(e){var t=this;2==e&&2==t.tabCurrent?(0==t.priceSort?t.optionType=4:t.optionType=3,t.priceSort=0==t.priceSort?1:0):(t.tabCurrent=e,0==e?t.optionType=1:1==e?t.optionType=2:2==e&&(t.optionType=3)),t.clearList(),t.getHouseList(t.optionType,t.provinceId,t.cityId,t.pageNum)},itemTap:function(e,t){this.$Router.push({path:"/pages/home/goodsDetail",query:{paimaiId:e,houseSource:t}})},clearList:function(){var e=this;e.pageNum=1,e.total="",e.newHouseList=[]},onPullDownRefresh:function(){var t=this;t.clearList(),t.hasLogin&&t.getRecommend(),t.getHouseList(t.optionType,t.provinceId,t.cityId,t.pageNum),t.noticeHasunread(),t.isFresh=!0,setTimeout((function(){e.stopPullDownRefresh()}),1e4)},search:function(t){var i=this;i.$Router.push({path:"/pages/home/searchDetail",query:{text:i.searchVal}}),e.hideKeyboard()},gotoAreaHousing:function(){this.$Router.push({path:"/pages/home/areaHousing"})},gotoAreaPrice:function(){this.$Router.push({path:"/pages/home/areaPrice"})},gotoLeakHousing:function(){this.$Router.push({path:"/pages/home/leakHousing"})},gotoNotice:function(){this.$Router.push({path:"/pages/my/manageNavs/notice/listC"})},onPageScroll:function(e){var t=this;t.scrollTop=e.scrollTop}},(0,a.mapMutations)(["updateAddress"]))};t.default=u}).call(this,i("543d")["default"])},c11a:function(e,t,i){"use strict";var n={"uni-icons":function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-icons/uni-icons")]).then(i.bind(null,"df065"))},"uni-load-more":function(){return i.e("components/uni-load-more/uni-load-more").then(i.bind(null,"61d8"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}))},f7aa:function(e,t,i){"use strict";i.r(t);var n=i("c11a"),a=i("b34a");for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("8d9f");var s,c=i("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=r.exports}},[["1f02","common/runtime","common/vendor"]]]);