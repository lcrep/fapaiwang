(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/chat/inputbar/suit/audio/audio"],{"08e7":function(e,t,o){"use strict";o.r(t);var n=o("81af"),r=o("cfb7");for(var c in r)"default"!==c&&function(e){o.d(t,e,(function(){return r[e]}))}(c);o("3293");var a,i=o("f0c5"),s=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=s.exports},"2d3e":function(e,t,o){},3293:function(e,t,o){"use strict";var n=o("2d3e"),r=o.n(n);r.a},"538a":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("dec8"),r=o("5f44"),c=r.RecordStatus,a=r.RecordDesc,i=!1,s=null,u=[50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50],d={components:{},data:function(){return{changedTouches:null,recordStatus:c.HIDE,RecordStatus:c,RecordDesc:a,radomheight:u,recorderManager:e.getRecorderManager(),recordClicked:!1,recordTime:0}},props:{username:{type:Object,value:{}},chatType:{type:String,value:n.chatType.SINGLE_CHAT}},onUnload:function(){},methods:{toggleWithoutAction:function(e){},toggleRecordModal:function(){this.recordStatus=this.recordStatus==c.HIDE?c.SHOW:c.HIDE,this.radomheight=u},handleRecordingMove:function(e){var t=e.touches[0],o=this.changedTouches;o&&(this.recordStatus==c.SWIPE&&o.pageY-t.pageY<20&&(this.recordStatus=c.HOLD),this.recordStatus==c.HOLD&&o.pageY-t.pageY>20&&(this.recordStatus=c.SWIPE))},handleRecording:function(t){var o=this;function n(){e.getSetting({success:function(t){var n=t.authSetting["scope.record"];0==n?e.openSetting({success:function(t){var n=t.authSetting["scope.record"];1==n?e.showToast({title:"授权成功",icon:"success"}):e.showToast({title:"请授权录音",icon:"none"}),o.isLongPress=!1}}):1==n?r():e.authorize({scope:"scope.record",success:function(){e.showToast({title:"授权成功",icon:"success"})},fail:function(e){console.log(e)}})},fail:function(){e.showToast({title:"鉴权失败，请重试",icon:"none"})}})}function r(){o.changedTouches=t.touches[0],o.recordStatus=c.HOLD,i=!0,o.myradom();var n=o.recorderManager||e.getRecorderManager();n.onStart((function(){s=setInterval((function(){o.recordTime+=1}),1e3)})),n.start({format:"mp3"}),setTimeout((function(){o.handleRecordingCancel(),i=!1}),1e5)}o.recordClicked=!0,setTimeout((function(){1==o.recordClicked&&n()}),350)},handleRecordingCancel:function(){var t=this;i=!1;var o=this.recorderManager;this.recordStatus==c.SWIPE?this.recordStatus=c.RELEASE:(this.recordStatus=c.HIDE,this.recordClicked=!1),o.onStop((function(o){var n=1e3*t.recordTime;if(t.recordStatus==c.RELEASE)return console.log("user canceled"),void(t.recordStatus=c.HIDE);n<=1e3?e.showToast({title:"录音时间太短",icon:"none"}):t.uploadRecord(o.tempFilePath,n),clearInterval(s),t.recordStatus=c.HIDE,t.recordTime=0})),o.stop()},isGroupChat:function(){return this.chatType==n.chatType.CHAT_ROOM},getSendToParam:function(){return this.isGroupChat()?this.username.groupId:this.username.your},uploadRecord:function(t,o){var r=this.$im.config.appkey.split("#"),c=this,a=this.$im.conn.context.accessToken;e.uploadFile({url:"https://a1.easemob.com/"+r[0]+"/"+r[1]+"/chatfiles",filePath:t,name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},success:function(r){var i=c.$im.conn.getUniqueId(),s=new c.$im.message(n.AUDIO,i),u=JSON.parse(r.data);s.set({apiUrl:c.$im.config.apiURL,accessToken:a,body:{type:n.AUDIO,url:u.uri+"/"+u.entities[0].uuid,filetype:"",filename:t,accessToken:a,length:Math.ceil(o/1e3)},from:c.username.myName,to:c.getSendToParam(),roomType:!1,chatType:c.chatType,success:function(e){}}),c.isGroupChat()&&s.setGroup("groupchat"),s.body.length=Math.ceil(o/1e3),c.$im.conn.send(s.body),e.$emit("saveSendMsg",{msg:s,type:n.AUDIO})}})},myradom:function(){for(var e=this,t=e.radomheight,o=0;o<e.radomheight.length;o++)t[o]=100*Math.random().toFixed(2)+10;e.radomheight=t,i&&setTimeout((function(){e.myradom()}),500)}}};t.default=d}).call(this,o("543d")["default"])},"81af":function(e,t,o){"use strict";var n,r=function(){var e=this,t=e.$createElement;e._self._c},c=[];o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return n}))},cfb7:function(e,t,o){"use strict";o.r(t);var n=o("538a"),r=o.n(n);for(var c in n)"default"!==c&&function(e){o.d(t,e,(function(){return n[e]}))}(c);t["default"]=r.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/chat/inputbar/suit/audio/audio-create-component',
    {
        'components/chat/inputbar/suit/audio/audio-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("08e7"))
        })
    },
    [['components/chat/inputbar/suit/audio/audio-create-component']]
]);
