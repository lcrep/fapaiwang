<view class="{{['wrap',view]}}" scroll-y="true" upper-threshold="-50" scroll-into-view="{{toView}}" data-event-opts="{{[['tap',[['onTap',['$event']]]],['scroll',[['scrollmore',['$event']]]],['scrolltoupper',[['refresh',['$event']]]]]}}" bindtap="__e" bindscroll="__e" bindscrolltoupper="__e"><block wx:for="{{chatMsg}}" wx:for-item="item" wx:for-index="__i0__" wx:key="mid"><view class="message" id="{{item.mid}}"><view class="time"><text class="time-text">{{item.time}}</text></view><view class="{{['main',item.style]}}"><view class="user"></view><image class="avatar" src="../../../static/images/defaultUserPic.png"></image><view class="{{[(true)?'msg':'',(item.msg.type=='img'||item.msg.type=='video')?'imgMsg':'']}}"><block wx:if="{{item.msg.type=='img'||item.msg.type=='video'}}"><view><block wx:if="{{item.msg.type=='img'}}"><image style="width:250rpx;display:block;" src="{{item.msg.data}}" mode="widthFix" data-url="{{item.msg.data}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"></image></block><block wx:if="{{item.msg.type=='video'}}"><video src="{{item.msg.data}}" controls autoplay></video></block></view></block><block wx:if="{{item.msg.type=='audio'}}"><audio-msg vue-id="{{'7654bf33-1-'+__i0__}}" msg="{{item}}" bind:__l="__l"></audio-msg></block><block wx:else><block wx:if="{{item.msg.type=='txt'||item.msg.type=='emoji'}}"><view><block wx:for="{{item.msg.data}}" wx:for-item="d_item" wx:for-index="d_index" wx:key="d_index"><view class="template"><block wx:if="{{d_item.type=='txt'}}"><text class="msg-text" style="float:left;">{{d_item.data}}</text></block><block wx:if="{{d_item.type=='emoji'}}"><image class="avatar" style="width:25px;height:25px;margin:0 0 2px 0;float:left;" src="{{'/static/images/faces/'+d_item.data}}"></image></block></view></block></view></block></block></view></view></view></block></view>